<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Pruebas Unitarias - CREATICPY Creditis</title>
</head>
<body>
  <h1>Pruebas Unitarias para CREATICPY Creditis</h1>
  <p>Abre la consola del navegador (F12) para ver los resultados de las pruebas.</p>

  <!-- Importar la lógica de la aplicación -->
  <script src="../src/app.js"></script>

  <!-- Script para ejecutar las pruebas -->
  <script>
    function runTests() {
      console.log('--- Iniciando Pruebas Unitarias para calculateAmortization ---');

      // Caso de prueba 1: Préstamo estándar
      let principal = 5000000; // Gs. 5,000,000
      let interest = 2; // 2% mensual
      let months = 12;
      let expected = 472797.94; // Valor de cuota esperado (calculado externamente)
      let result = calculateAmortization(principal, interest, months);
      assertEquals(result, expected, 'Préstamo estándar');

      // Caso de prueba 2: Tasa de interés cero
      principal = 1200000;
      interest = 0;
      months = 12;
      expected = 100000.00;
      result = calculateAmortization(principal, interest, months);
      assertEquals(result, expected, 'Tasa de interés cero');

      // Caso de prueba 3: Principal cero
      principal = 0;
      interest = 5;
      months = 24;
      expected = 0;
      result = calculateAmortization(principal, interest, months);
      assertEquals(result, expected, 'Principal cero');
      
      // Caso de prueba 4: Plazo cero
      principal = 1000000;
      interest = 3;
      months = 0;
      expected = 0;
      result = calculateAmortization(principal, interest, months);
      assertEquals(result, expected, 'Plazo cero');

      // Caso de prueba 5: Préstamo a corto plazo
      principal = 2000000;
      interest = 1.5;
      months = 3;
      expected = 686835.85;
      result = calculateAmortization(principal, interest, months);
      assertEquals(result, expected, 'Préstamo a corto plazo');

      console.log('--- Pruebas Finalizadas ---');
    }

    function assertEquals(actual, expected, testName) {
      // Usar una pequeña tolerancia para comparar números de punto flotante
      const tolerance = 0.01;
      if (Math.abs(actual - expected) < tolerance) {
        console.log(`%c[PASA] ${testName}`, 'color: green;');
      } else {
        console.error(`%c[FALLA] ${testName}: Se esperaba ${expected}, pero se obtuvo ${actual}`, 'color: red;');
      }
    }

    // Ejecutar las pruebas cuando la página cargue
    window.onload = runTests;
  </script>
</body>
</html>
